<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Infinate Mandala</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.9.0/p5.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            background-color: black;
            text-align: center;
            font-family: serif;
        }

        h1 {
            color: red;
            margin-bottom: 20px;
            font-size: 32px;
        }

        #p5-sketch {
            display: flex;
            justify-content: center;
            align-items: center;
            width: 100%;
            margin-bottom: 20px;
        }

        a {
            display: block;
            text-decoration: none;
            font-size: 18px;
            color: black;
            background: red;
            padding: 10px 15px;
            transition: 0.3s;
            font-weight: bold;
        }

        a:hover {
            background: darkred;
        }
    </style>
</head>
<body>

    <h1>Infinate Mandala</h1>
    <div id="p5-sketch"></div>
    <a href="index.html">Back to Home</a>

    <script>
let angle = 0; // spiral spin start position

function setup() {
  let canvas = createCanvas(400, 400);
  canvas.parent('p5-sketch'); // Attach canvas to the div
  noFill(); 
  strokeWeight(0.5); 
}
          
           
            
    
         
function draw() {

  background(0);
  
  translate(width / 2, height / 2); // set origon

 
  for (let i = 0; i < 200; i++) { //srart loop for outter spiral, runs 200 times (i is outer loop) 

    for (let j = 0; j < 10; j++) {//inner loop runs 10 times (j is inner loop)

    
      
      //--------------mouse tracking------------ d determins mouse position
      
      let d = dist(mouseX, mouseY, width / 2 + i * 2 * cos(angle + radians(i * 10)), height / 2 + i * 2 * sin(angle + radians(i * 10)));
      
      //-----------------------------------------

    
      let scaleFactor = map(d, 0, width / 2, 2, 0.5); //define scale of circles based on mouse positon (d)

      
      stroke(lerpColor(color(255, 0, 0), color(8, 0, 255), (i + j) % 200 / 200));// make the stroke colour a gradient between red and blue... lerpcolor uses the i and j to determine loop positoon, so red is always in the centre.

      push(); 
      rotate(angle + radians(i * 10 + j * 36));//refenced from p5.js spiral example code.... rotates the spiral based on i and j values for inner and outer loops
      
//--------------------making the circles-----
      ellipse(i * 2, 0, 50 * scaleFactor, 50 * scaleFactor);
      pop()
    }
  }
  
  angle += 0.005 //angle increse from start angle to make spin and speed
}

 
    </script>

</body>
</html>
